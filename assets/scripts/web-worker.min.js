!function(){"use strict";function a(a){return{index:parseInt(a.index,10),sura:parseInt(this.index,10),text:a.text,bismillah:a.bismillah||!1}}function e(e,r){var n=r.aya||[];return e.concat(n.map(a,r))}function r(a,e){var r=[],n=s(a,"meta.suras.sura"),t=a.quran.filter(function(a){return a.page===e}).reduce(function(a,e){var r=a[e.sura]||[];return r.push(e),a[e.sura]=r,a},{});for(var u in t)r.push(Object.assign({},n[u-1],{ayas:t[u]}));return r}var n=function(a){var r=1,n=1,t=a.meta;return{quran:a.quran.reduce(e,[]).map(function(a,e,s){var u=s[e+1],i=t.pages.page[r],c=t.rukus.ruku[n],o=!1,d=t.sajdas.sajda.find(function(e){return e.sura==a.sura&&e.aya==a.index});return i&&a.sura==i.sura&&a.index==i.aya&&r++,c&&u.sura==c.sura&&u.index==c.aya&&(o=parseInt(c.index,10),n++),Object.assign(Object.create(null),{page:r,sajda:d&&d.type||!1,ruku:o},a)}),meta:t}},t=function(a,e){var r,n;return a.quran.length>0?(r=a.meta.suras.sura||[],(n=r[e-1])?[Object.assign({},n,{ayas:a.quran.filter(function(a){return a.sura===e})})]:[]):[]},s=function(a,e){return e.split(".").reduce(function(a,e){return a&&a[e]},a)},u=function(a,e,n){switch(a){case"sura":return t(n,e);case"page":return r(n,e);default:return[]}};self.onmessage=function(a){var e=a.target,r=a.data,t=r.message,s=r.messageId,i=t.data;switch(t.action){case"LOAD":e.postMessage({messageId:s,type:t.action,data:n(i)});break;case"GOTO_INDEX":e.postMessage({messageId:s,type:t.action,data:u(i.type,i.index,i.source)});break;default:console.log(t)}}}();
