{"version":3,"file":"web-worker.js","sources":["../../src/utils/quran/prepare.js","../../src/utils/quran/getSura.js","../../src/utils/object/getproperty.js","../../src/utils/quran/getPage.js","../../src/constants.js","../../src/utils/quran/getVerse.js","../../src/webWorker/onMessage.js","../../src/webWorker/main.js"],"sourcesContent":["function AyaMap(aya) {\n    return {\n        index: parseInt(aya.index, 10),\n        sura: parseInt(this.index, 10),\n        text: aya.text,\n        bismillah: aya.bismillah || false\n    }\n}\n\nfunction chaptersReducer(accum, sura) {\n    var aya = sura.aya || [];\n    return accum.concat(aya.map(AyaMap, sura))\n}\n\nexport default function (data) {\n    var p = 1;\n    var r = 1;\n    var meta = data.meta;\n    var quran = data.quran\n        .reduce(chaptersReducer, [])\n        .map(function (aya, index, array) {\n            var nextAya = array[index + 1];\n            var page = meta.pages.page[p];\n            var ruku = meta.rukus.ruku[r];\n            var isRuku = false;\n            var sajda = meta.sajdas.sajda.find(function (s) {\n                return s.sura == aya.sura && s.aya == aya.index;\n            });\n\n            if (page && aya.sura == page.sura && aya.index == page.aya) {\n                p++;\n            }\n\n            if (ruku && nextAya.sura == ruku.sura && nextAya.index == ruku.aya) {\n                isRuku = parseInt(ruku.index, 10);\n                r++;\n            }\n\n            return (Object.assign(Object.create(null), {\n                page: p,\n                sajda: sajda && sajda.type || false,\n                ruku: isRuku\n            }, aya));\n        });\n\n    return {\n        quran: quran,\n        meta: meta\n    }\n}\n","export default function (source, suraIndex) {\n    const hasSource = source.quran.length > 0;\n    var suraList, chapter;\n\n    if (hasSource) {\n        suraList = source.meta.suras.sura || [];\n        chapter = suraList[suraIndex - 1];\n        return chapter ? [Object.assign({}, chapter, {\n            ayas: source.quran.filter(function (aya) {\n                return aya.sura === suraIndex;\n            })\n        })] : [];\n    }\n\n    return [];\n}\n","export default function (obj, property) {\n    return property.split('.').reduce(function (acc, prop) {\n        return acc && acc[prop];\n    }, obj);\n}\n","import getObjectProperty from '../object/getproperty';\n\nexport default function getPage(source, index) {\n    let chapters = [];\n    const suras = getObjectProperty(source, 'meta.suras.sura');\n    const groups = source.quran.filter(function (aya) {\n        return aya.page === index\n    }).reduce(function (accum, item) {\n        let ayas = accum[item.sura] || [];\n        ayas.push(item);\n        accum[item.sura] = ayas;\n        return accum;\n    }, {});\n\n    for (let suraIndex in groups) {\n        chapters.push(Object.assign({}, suras[suraIndex - 1], {\n            ayas: groups[suraIndex]\n        }))\n    }\n\n    return chapters;\n}\n","export const TYPE_PAGE = 'page';\nexport const TYPE_SURA = 'sura';\nexport const ACTION_LOAD = 'LOAD';\nexport const ACTION_GOTO_INDEX = 'GOTO_INDEX';\nexport const ACTION_CHANGE_TYPE = 'CHANGE_TYPE';\nexport const ACTION_APPLY = 'APPLY';\nexport const ACTION_PAGING_OPTIONS = 'PAGING_OPTIONS';\n\nexport const SURA_AR = 'سورة‎‎';\nexport const BISMILLAH_AR = '\\u00d8\\u00a8\\u00d9\\u0090\\u00d8\\u00b3\\u00d9\\u2019\\u00d9\\u2026\\u00d9\\u0090 \\u00d8\\u00a7\\u00d9\\u201e\\u00d9\\u201e\\u00d9\\u017d\\u00d9\\u2018\\u00d9\\u2021\\u00d9\\u0090 \\u00d8\\u00a7\\u00d9\\u201e\\u00d8\\u00b1\\u00d9\\u017d\\u00d9\\u2018\\u00d8\\u00ad\\u00d9\\u2019\\u00d9\\u2026\\u00d9\\u017d\\u00d9\\u2020\\u00d9\\u0090 \\u00d8\\u00a7\\u00d9\\u201e\\u00d8\\u00b1\\u00d9\\u017d\\u00d9\\u2018\\u00d8\\u00ad\\u00d9\\u0090\\u00d9\\u0160\\u00d9\\u2026\\u00d9\\u0090';\n","import getSura from './getSura';\nimport getPage from './getPage';\nimport {TYPE_PAGE, TYPE_SURA} from '../../constants';\n\nexport default function (type, index, source) {\n    switch (type) {\n        case TYPE_SURA:\n            return getSura(source, index);\n        case TYPE_PAGE:\n            return getPage(source, index);\n        default:\n            return [];\n    }\n}\n","import prepare from '../utils/quran/prepare';\nimport getVerse from '../utils/quran/getVerse';\nimport {ACTION_LOAD, ACTION_GOTO_INDEX} from '../constants';\n\nexport default function (e) {\n    var worker = e.target,\n        eData = e.data,\n        message = eData.message,\n        messageId = eData.messageId,\n        data = message.data;\n\n    switch (message.action) {\n        case ACTION_LOAD:\n            worker.postMessage({\n                messageId: messageId,\n                type: message.action,\n                data: prepare(data)\n            });\n            break;\n        case ACTION_GOTO_INDEX:\n            worker.postMessage({\n                messageId: messageId,\n                type: message.action,\n                data: getVerse(data.type, data.index, data.source)\n            });\n            break;\n        default:\n            console.log(message)\n    }\n}\n","import onMessage from './onMessage';\n\nself.onmessage = onMessage;\n"],"names":["AyaMap","aya","parseInt","index","text","bismillah","chaptersReducer","accum","sura","concat","map","data","p","r","meta","quran","reduce","array","nextAya","page","pages","ruku","rukus","isRuku","sajda","sajdas","find","s","Object","assign","create","type","source","suraIndex","hasSource","length","suraList","chapter","suras","filter","obj","property","split","acc","prop","getPage","chapters","getObjectProperty","groups","item","ayas","push","TYPE_PAGE","TYPE_SURA","ACTION_LOAD","ACTION_GOTO_INDEX","getSura","e","worker","target","eData","message","messageId","action","postMessage","prepare","getVerse","log","self","onmessage","onMessage"],"mappings":"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"}